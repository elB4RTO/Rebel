use crate::drivers::keyboard::{KeyEvent, Key, KeyState};


const
MAX_SCANCODE_LEN : usize = 6;


pub(in crate::drivers::keyboard::ps2)
fn key_from(buf:&[u8]) -> Result<Option<KeyEvent>, ()> {
    if buf.len() > MAX_SCANCODE_LEN {
        return Err(());
    } else if let Some(b) = buf.last() {
        match b {
            0xE0|0xE1 => return Ok(None),
            _ => (),
        }
    }

    match buf {
        [0x01] => Ok(Some((Key::Escape, KeyState::Pressed).into())),
        [0x02] => Ok(Some((Key::Typewrite_1, KeyState::Pressed).into())),
        [0x03] => Ok(Some((Key::Typewrite_2, KeyState::Pressed).into())),
        [0x04] => Ok(Some((Key::Typewrite_3, KeyState::Pressed).into())),
        [0x05] => Ok(Some((Key::Typewrite_4, KeyState::Pressed).into())),
        [0x06] => Ok(Some((Key::Typewrite_5, KeyState::Pressed).into())),
        [0x07] => Ok(Some((Key::Typewrite_6, KeyState::Pressed).into())),
        [0x08] => Ok(Some((Key::Typewrite_7, KeyState::Pressed).into())),
        [0x09] => Ok(Some((Key::Typewrite_8, KeyState::Pressed).into())),
        [0x0A] => Ok(Some((Key::Typewrite_9, KeyState::Pressed).into())),
        [0x0B] => Ok(Some((Key::Typewrite_0, KeyState::Pressed).into())),
        [0x0C] => Ok(Some((Key::Typewrite_Hyphen, KeyState::Pressed).into())),
        [0x0D] => Ok(Some((Key::Typewrite_Equal, KeyState::Pressed).into())),
        [0x0E] => Ok(Some((Key::Backspace, KeyState::Pressed).into())),
        [0x0F] => Ok(Some((Key::Tab, KeyState::Pressed).into())),
        [0x10] => Ok(Some((Key::Typewrite_Q, KeyState::Pressed).into())),
        [0x11] => Ok(Some((Key::Typewrite_W, KeyState::Pressed).into())),
        [0x12] => Ok(Some((Key::Typewrite_E, KeyState::Pressed).into())),
        [0x13] => Ok(Some((Key::Typewrite_R, KeyState::Pressed).into())),
        [0x14] => Ok(Some((Key::Typewrite_T, KeyState::Pressed).into())),
        [0x15] => Ok(Some((Key::Typewrite_Y, KeyState::Pressed).into())),
        [0x16] => Ok(Some((Key::Typewrite_U, KeyState::Pressed).into())),
        [0x17] => Ok(Some((Key::Typewrite_I, KeyState::Pressed).into())),
        [0x18] => Ok(Some((Key::Typewrite_O, KeyState::Pressed).into())),
        [0x19] => Ok(Some((Key::Typewrite_P, KeyState::Pressed).into())),
        [0x1A] => Ok(Some((Key::Typewrite_Bracket, KeyState::Pressed).into())),
        [0x1B] => Ok(Some((Key::Typewrite_Unbracket, KeyState::Pressed).into())),
        [0x1C] => Ok(Some((Key::Enter, KeyState::Pressed).into())),
        [0x1D] => Ok(Some((Key::LeftControl, KeyState::Pressed).into())),
        [0x1E] => Ok(Some((Key::Typewrite_A, KeyState::Pressed).into())),
        [0x1F] => Ok(Some((Key::Typewrite_S, KeyState::Pressed).into())),
        [0x20] => Ok(Some((Key::Typewrite_D, KeyState::Pressed).into())),
        [0x21] => Ok(Some((Key::Typewrite_F, KeyState::Pressed).into())),
        [0x22] => Ok(Some((Key::Typewrite_G, KeyState::Pressed).into())),
        [0x23] => Ok(Some((Key::Typewrite_H, KeyState::Pressed).into())),
        [0x24] => Ok(Some((Key::Typewrite_J, KeyState::Pressed).into())),
        [0x25] => Ok(Some((Key::Typewrite_K, KeyState::Pressed).into())),
        [0x26] => Ok(Some((Key::Typewrite_L, KeyState::Pressed).into())),
        [0x27] => Ok(Some((Key::Typewrite_Semicolon, KeyState::Pressed).into())),
        [0x28] => Ok(Some((Key::Typewrite_Apostrophe, KeyState::Pressed).into())),
        [0x29] => Ok(Some((Key::Typewrite_Backtick, KeyState::Pressed).into())),
        [0x2A] => Ok(Some((Key::LeftShift, KeyState::Pressed).into())),
        [0x2B] => Ok(Some((Key::Typewrite_Backslash, KeyState::Pressed).into())),
        [0x2C] => Ok(Some((Key::Typewrite_Z, KeyState::Pressed).into())),
        [0x2D] => Ok(Some((Key::Typewrite_X, KeyState::Pressed).into())),
        [0x2E] => Ok(Some((Key::Typewrite_C, KeyState::Pressed).into())),
        [0x2F] => Ok(Some((Key::Typewrite_V, KeyState::Pressed).into())),
        [0x30] => Ok(Some((Key::Typewrite_B, KeyState::Pressed).into())),
        [0x31] => Ok(Some((Key::Typewrite_N, KeyState::Pressed).into())),
        [0x32] => Ok(Some((Key::Typewrite_M, KeyState::Pressed).into())),
        [0x33] => Ok(Some((Key::Typewrite_Comma, KeyState::Pressed).into())),
        [0x34] => Ok(Some((Key::Typewrite_Dot, KeyState::Pressed).into())),
        [0x35] => Ok(Some((Key::Typewrite_Slash, KeyState::Pressed).into())),
        [0x36] => Ok(Some((Key::RightShift, KeyState::Pressed).into())),
        [0x37] => Ok(Some((Key::Keypad_Asterisk, KeyState::Pressed).into())),
        [0x38] => Ok(Some((Key::LeftMeta, KeyState::Pressed).into())),
        [0x39] => Ok(Some((Key::Space, KeyState::Pressed).into())),
        [0x3A] => Ok(Some((Key::CapsLock, KeyState::Pressed).into())),
        [0x3B] => Ok(Some((Key::F1, KeyState::Pressed).into())),
        [0x3C] => Ok(Some((Key::F2, KeyState::Pressed).into())),
        [0x3D] => Ok(Some((Key::F3, KeyState::Pressed).into())),
        [0x3E] => Ok(Some((Key::F4, KeyState::Pressed).into())),
        [0x3F] => Ok(Some((Key::F5, KeyState::Pressed).into())),
        [0x40] => Ok(Some((Key::F6, KeyState::Pressed).into())),
        [0x41] => Ok(Some((Key::F7, KeyState::Pressed).into())),
        [0x42] => Ok(Some((Key::F8, KeyState::Pressed).into())),
        [0x43] => Ok(Some((Key::F9, KeyState::Pressed).into())),
        [0x44] => Ok(Some((Key::F10, KeyState::Pressed).into())),
        [0x45] => Ok(Some((Key::NumberLock, KeyState::Pressed).into())),
        [0x46] => Ok(Some((Key::ScrollLock, KeyState::Pressed).into())),
        [0x47] => Ok(Some((Key::Keypad_7, KeyState::Pressed).into())),
        [0x48] => Ok(Some((Key::Keypad_8, KeyState::Pressed).into())),
        [0x49] => Ok(Some((Key::Keypad_9, KeyState::Pressed).into())),
        [0x4A] => Ok(Some((Key::Keypad_Hyphen, KeyState::Pressed).into())),
        [0x4B] => Ok(Some((Key::Keypad_4, KeyState::Pressed).into())),
        [0x4C] => Ok(Some((Key::Keypad_5, KeyState::Pressed).into())),
        [0x4D] => Ok(Some((Key::Keypad_6, KeyState::Pressed).into())),
        [0x4E] => Ok(Some((Key::Keypad_Plus, KeyState::Pressed).into())),
        [0x4F] => Ok(Some((Key::Keypad_1, KeyState::Pressed).into())),
        [0x50] => Ok(Some((Key::Keypad_2, KeyState::Pressed).into())),
        [0x51] => Ok(Some((Key::Keypad_3, KeyState::Pressed).into())),
        [0x52] => Ok(Some((Key::Keypad_0, KeyState::Pressed).into())),
        [0x53] => Ok(Some((Key::Keypad_Dot, KeyState::Pressed).into())),
        [0x57] => Ok(Some((Key::F11, KeyState::Pressed).into())),
        [0x58] => Ok(Some((Key::F12, KeyState::Pressed).into())),
        [0x81] => Ok(Some((Key::Escape, KeyState::Released).into())),
        [0x82] => Ok(Some((Key::Typewrite_1, KeyState::Released).into())),
        [0x83] => Ok(Some((Key::Typewrite_2, KeyState::Released).into())),
        [0x84] => Ok(Some((Key::Typewrite_3, KeyState::Released).into())),
        [0x85] => Ok(Some((Key::Typewrite_4, KeyState::Released).into())),
        [0x86] => Ok(Some((Key::Typewrite_5, KeyState::Released).into())),
        [0x87] => Ok(Some((Key::Typewrite_6, KeyState::Released).into())),
        [0x88] => Ok(Some((Key::Typewrite_7, KeyState::Released).into())),
        [0x89] => Ok(Some((Key::Typewrite_8, KeyState::Released).into())),
        [0x8A] => Ok(Some((Key::Typewrite_9, KeyState::Released).into())),
        [0x8B] => Ok(Some((Key::Typewrite_0, KeyState::Released).into())),
        [0x8C] => Ok(Some((Key::Typewrite_Hyphen, KeyState::Released).into())),
        [0x8D] => Ok(Some((Key::Typewrite_Equal, KeyState::Released).into())),
        [0x8E] => Ok(Some((Key::Backspace, KeyState::Released).into())),
        [0x8F] => Ok(Some((Key::Tab, KeyState::Released).into())),
        [0x90] => Ok(Some((Key::Typewrite_Q, KeyState::Released).into())),
        [0x91] => Ok(Some((Key::Typewrite_W, KeyState::Released).into())),
        [0x92] => Ok(Some((Key::Typewrite_E, KeyState::Released).into())),
        [0x93] => Ok(Some((Key::Typewrite_R, KeyState::Released).into())),
        [0x94] => Ok(Some((Key::Typewrite_T, KeyState::Released).into())),
        [0x95] => Ok(Some((Key::Typewrite_Y, KeyState::Released).into())),
        [0x96] => Ok(Some((Key::Typewrite_U, KeyState::Released).into())),
        [0x97] => Ok(Some((Key::Typewrite_I, KeyState::Released).into())),
        [0x98] => Ok(Some((Key::Typewrite_O, KeyState::Released).into())),
        [0x99] => Ok(Some((Key::Typewrite_P, KeyState::Released).into())),
        [0x9A] => Ok(Some((Key::Typewrite_Bracket, KeyState::Released).into())),
        [0x9B] => Ok(Some((Key::Typewrite_Unbracket, KeyState::Released).into())),
        [0x9C] => Ok(Some((Key::Enter, KeyState::Released).into())),
        [0x9D] => Ok(Some((Key::LeftControl, KeyState::Released).into())),
        [0x9E] => Ok(Some((Key::Typewrite_A, KeyState::Released).into())),
        [0x9F] => Ok(Some((Key::Typewrite_S, KeyState::Released).into())),
        [0xA0] => Ok(Some((Key::Typewrite_D, KeyState::Released).into())),
        [0xA1] => Ok(Some((Key::Typewrite_F, KeyState::Released).into())),
        [0xA2] => Ok(Some((Key::Typewrite_G, KeyState::Released).into())),
        [0xA3] => Ok(Some((Key::Typewrite_H, KeyState::Released).into())),
        [0xA4] => Ok(Some((Key::Typewrite_J, KeyState::Released).into())),
        [0xA5] => Ok(Some((Key::Typewrite_K, KeyState::Released).into())),
        [0xA6] => Ok(Some((Key::Typewrite_L, KeyState::Released).into())),
        [0xA7] => Ok(Some((Key::Typewrite_Semicolon, KeyState::Released).into())),
        [0xA8] => Ok(Some((Key::Typewrite_Apostrophe, KeyState::Released).into())),
        [0xA9] => Ok(Some((Key::Typewrite_Backtick, KeyState::Released).into())),
        [0xAA] => Ok(Some((Key::LeftShift, KeyState::Released).into())),
        [0xAB] => Ok(Some((Key::Typewrite_Backslash, KeyState::Released).into())),
        [0xAC] => Ok(Some((Key::Typewrite_Z, KeyState::Released).into())),
        [0xAD] => Ok(Some((Key::Typewrite_X, KeyState::Released).into())),
        [0xAE] => Ok(Some((Key::Typewrite_C, KeyState::Released).into())),
        [0xAF] => Ok(Some((Key::Typewrite_V, KeyState::Released).into())),
        [0xB0] => Ok(Some((Key::Typewrite_B, KeyState::Released).into())),
        [0xB1] => Ok(Some((Key::Typewrite_N, KeyState::Released).into())),
        [0xB2] => Ok(Some((Key::Typewrite_M, KeyState::Released).into())),
        [0xB3] => Ok(Some((Key::Typewrite_Comma, KeyState::Released).into())),
        [0xB4] => Ok(Some((Key::Typewrite_Dot, KeyState::Released).into())),
        [0xB5] => Ok(Some((Key::Typewrite_Slash, KeyState::Released).into())),
        [0xB6] => Ok(Some((Key::RightShift, KeyState::Released).into())),
        [0xB7] => Ok(Some((Key::Keypad_Asterisk, KeyState::Released).into())),
        [0xB8] => Ok(Some((Key::LeftMeta, KeyState::Released).into())),
        [0xB9] => Ok(Some((Key::Space, KeyState::Released).into())),
        [0xBA] => Ok(Some((Key::CapsLock, KeyState::Released).into())),
        [0xBB] => Ok(Some((Key::F1, KeyState::Released).into())),
        [0xBC] => Ok(Some((Key::F2, KeyState::Released).into())),
        [0xBD] => Ok(Some((Key::F3, KeyState::Released).into())),
        [0xBE] => Ok(Some((Key::F4, KeyState::Released).into())),
        [0xBF] => Ok(Some((Key::F5, KeyState::Released).into())),
        [0xC0] => Ok(Some((Key::F6, KeyState::Released).into())),
        [0xC1] => Ok(Some((Key::F7, KeyState::Released).into())),
        [0xC2] => Ok(Some((Key::F8, KeyState::Released).into())),
        [0xC3] => Ok(Some((Key::F9, KeyState::Released).into())),
        [0xC4] => Ok(Some((Key::F10, KeyState::Released).into())),
        [0xC5] => Ok(Some((Key::NumberLock, KeyState::Released).into())),
        [0xC6] => Ok(Some((Key::ScrollLock, KeyState::Released).into())),
        [0xC7] => Ok(Some((Key::Keypad_7, KeyState::Released).into())),
        [0xC8] => Ok(Some((Key::Keypad_8, KeyState::Released).into())),
        [0xC9] => Ok(Some((Key::Keypad_9, KeyState::Released).into())),
        [0xCA] => Ok(Some((Key::Keypad_Hyphen, KeyState::Released).into())),
        [0xCB] => Ok(Some((Key::Keypad_4, KeyState::Released).into())),
        [0xCC] => Ok(Some((Key::Keypad_5, KeyState::Released).into())),
        [0xCD] => Ok(Some((Key::Keypad_6, KeyState::Released).into())),
        [0xCE] => Ok(Some((Key::Keypad_Plus, KeyState::Released).into())),
        [0xCF] => Ok(Some((Key::Keypad_1, KeyState::Released).into())),
        [0xD0] => Ok(Some((Key::Keypad_2, KeyState::Released).into())),
        [0xD1] => Ok(Some((Key::Keypad_3, KeyState::Released).into())),
        [0xD2] => Ok(Some((Key::Keypad_0, KeyState::Released).into())),
        [0xD3] => Ok(Some((Key::Keypad_Dot, KeyState::Released).into())),
        [0xD7] => Ok(Some((Key::F11, KeyState::Released).into())),
        [0xD8] => Ok(Some((Key::F12, KeyState::Released).into())),
        [0xE0, 0x10] => Ok(Some((Key::MM_PreviousTrack, KeyState::Pressed).into())),
        [0xE0, 0x19] => Ok(Some((Key::MM_NextTrack, KeyState::Pressed).into())),
        [0xE0, 0x1C] => Ok(Some((Key::Keypad_Enter, KeyState::Pressed).into())),
        [0xE0, 0x1D] => Ok(Some((Key::RightControl, KeyState::Pressed).into())),
        [0xE0, 0x20] => Ok(Some((Key::MM_Mute, KeyState::Pressed).into())),
        [0xE0, 0x21] => Ok(Some((Key::Calculator, KeyState::Pressed).into())),
        [0xE0, 0x22] => Ok(Some((Key::MM_Play, KeyState::Pressed).into())),
        [0xE0, 0x24] => Ok(Some((Key::MM_Stop, KeyState::Pressed).into())),
        [0xE0, 0x2E] => Ok(Some((Key::MM_VolumeDown, KeyState::Pressed).into())),
        [0xE0, 0x30] => Ok(Some((Key::MM_VolumeUp, KeyState::Pressed).into())),
        [0xE0, 0x32] => Ok(Some((Key::WWW_Home, KeyState::Pressed).into())),
        [0xE0, 0x35] => Ok(Some((Key::Keypad_Slash, KeyState::Pressed).into())),
        [0xE0, 0x38] => Ok(Some((Key::RightMeta, KeyState::Pressed).into())),
        [0xE0, 0x47] => Ok(Some((Key::Home, KeyState::Pressed).into())),
        [0xE0, 0x48] => Ok(Some((Key::Up, KeyState::Pressed).into())),
        [0xE0, 0x49] => Ok(Some((Key::PageUp, KeyState::Pressed).into())),
        [0xE0, 0x4B] => Ok(Some((Key::Left, KeyState::Pressed).into())),
        [0xE0, 0x4D] => Ok(Some((Key::Right, KeyState::Pressed).into())),
        [0xE0, 0x4F] => Ok(Some((Key::End, KeyState::Pressed).into())),
        [0xE0, 0x50] => Ok(Some((Key::Down, KeyState::Pressed).into())),
        [0xE0, 0x51] => Ok(Some((Key::PageDown, KeyState::Pressed).into())),
        [0xE0, 0x52] => Ok(Some((Key::Insert, KeyState::Pressed).into())),
        [0xE0, 0x53] => Ok(Some((Key::Delete, KeyState::Pressed).into())),
        [0xE0, 0x5B] => Ok(Some((Key::LeftSuper, KeyState::Pressed).into())),
        [0xE0, 0x5C] => Ok(Some((Key::RightSuper, KeyState::Pressed).into())),
        [0xE0, 0x5D] => Ok(Some((Key::Menu, KeyState::Pressed).into())),
        [0xE0, 0x5E] => Ok(Some((Key::ACPI_Power, KeyState::Pressed).into())),
        [0xE0, 0x5F] => Ok(Some((Key::ACPI_Sleep, KeyState::Pressed).into())),
        [0xE0, 0x63] => Ok(Some((Key::ACPI_Wake, KeyState::Pressed).into())),
        [0xE0, 0x65] => Ok(Some((Key::WWW_Search, KeyState::Pressed).into())),
        [0xE0, 0x66] => Ok(Some((Key::WWW_Favorites, KeyState::Pressed).into())),
        [0xE0, 0x67] => Ok(Some((Key::WWW_Refresh, KeyState::Pressed).into())),
        [0xE0, 0x68] => Ok(Some((Key::WWW_Stop, KeyState::Pressed).into())),
        [0xE0, 0x69] => Ok(Some((Key::WWW_Forward, KeyState::Pressed).into())),
        [0xE0, 0x6A] => Ok(Some((Key::WWW_Back, KeyState::Pressed).into())),
        [0xE0, 0x6B] => Ok(Some((Key::Folders, KeyState::Pressed).into())),
        [0xE0, 0x6C] => Ok(Some((Key::Email, KeyState::Pressed).into())),
        [0xE0, 0x6D] => Ok(Some((Key::MM_MediaSelect, KeyState::Pressed).into())),
        [0xE0, 0x90] => Ok(Some((Key::MM_PreviousTrack, KeyState::Released).into())),
        [0xE0, 0x99] => Ok(Some((Key::MM_NextTrack, KeyState::Released).into())),
        [0xE0, 0x9C] => Ok(Some((Key::Keypad_Enter, KeyState::Released).into())),
        [0xE0, 0x9D] => Ok(Some((Key::RightControl, KeyState::Released).into())),
        [0xE0, 0xA0] => Ok(Some((Key::MM_Mute, KeyState::Released).into())),
        [0xE0, 0xA1] => Ok(Some((Key::Calculator, KeyState::Released).into())),
        [0xE0, 0xA2] => Ok(Some((Key::MM_Play, KeyState::Released).into())),
        [0xE0, 0xA4] => Ok(Some((Key::MM_Stop, KeyState::Released).into())),
        [0xE0, 0xAE] => Ok(Some((Key::MM_VolumeDown, KeyState::Released).into())),
        [0xE0, 0xB0] => Ok(Some((Key::MM_VolumeUp, KeyState::Released).into())),
        [0xE0, 0xB2] => Ok(Some((Key::WWW_Home, KeyState::Released).into())),
        [0xE0, 0xB5] => Ok(Some((Key::Keypad_Slash, KeyState::Released).into())),
        [0xE0, 0xB8] => Ok(Some((Key::RightMeta, KeyState::Released).into())),
        [0xE0, 0xC7] => Ok(Some((Key::Home, KeyState::Released).into())),
        [0xE0, 0xC8] => Ok(Some((Key::Up, KeyState::Released).into())),
        [0xE0, 0xC9] => Ok(Some((Key::PageUp, KeyState::Released).into())),
        [0xE0, 0xCB] => Ok(Some((Key::Left, KeyState::Released).into())),
        [0xE0, 0xCD] => Ok(Some((Key::Right, KeyState::Released).into())),
        [0xE0, 0xCF] => Ok(Some((Key::End, KeyState::Released).into())),
        [0xE0, 0xD0] => Ok(Some((Key::Down, KeyState::Released).into())),
        [0xE0, 0xD1] => Ok(Some((Key::PageDown, KeyState::Released).into())),
        [0xE0, 0xD2] => Ok(Some((Key::Insert, KeyState::Released).into())),
        [0xE0, 0xD3] => Ok(Some((Key::Delete, KeyState::Released).into())),
        [0xE0, 0xDB] => Ok(Some((Key::LeftSuper, KeyState::Released).into())),
        [0xE0, 0xDC] => Ok(Some((Key::RightSuper, KeyState::Released).into())),
        [0xE0, 0xDD] => Ok(Some((Key::Menu, KeyState::Released).into())),
        [0xE0, 0xDE] => Ok(Some((Key::ACPI_Power, KeyState::Released).into())),
        [0xE0, 0xDF] => Ok(Some((Key::ACPI_Sleep, KeyState::Released).into())),
        [0xE0, 0xE3] => Ok(Some((Key::ACPI_Wake, KeyState::Released).into())),
        [0xE0, 0xE5] => Ok(Some((Key::WWW_Search, KeyState::Released).into())),
        [0xE0, 0xE6] => Ok(Some((Key::WWW_Favorites, KeyState::Released).into())),
        [0xE0, 0xE7] => Ok(Some((Key::WWW_Refresh, KeyState::Released).into())),
        [0xE0, 0xE8] => Ok(Some((Key::WWW_Stop, KeyState::Released).into())),
        [0xE0, 0xE9] => Ok(Some((Key::WWW_Forward, KeyState::Released).into())),
        [0xE0, 0xEA] => Ok(Some((Key::WWW_Back, KeyState::Released).into())),
        [0xE0, 0xEB] => Ok(Some((Key::Folders, KeyState::Released).into())),
        [0xE0, 0xEC] => Ok(Some((Key::Email, KeyState::Released).into())),
        [0xE0, 0xED] => Ok(Some((Key::MM_MediaSelect, KeyState::Released).into())),
        [0xE0, 0x2A, 0xE0, 0x37] => Ok(Some((Key::PrintScreen, KeyState::Pressed).into())),
        [0xE0, 0xB7, 0xE0, 0xAA] => Ok(Some((Key::PrintScreen, KeyState::Released).into())),
        [0xE1, 0x1D, 0x45, 0xE1, 0x9D, 0xC5] => Ok(Some((Key::Pause, KeyState::Pressed).into())),
        _ => Ok(None),
    }
}
